define("Numbers/JSNumber",[],function(){function e(e){if(e.toNumber)return e.toNumber();if(typeof e=="number")return e;throw"NaN"}function t(e){return e instanceof n||typeof e=="number"||e===n.Zero}var n=function(){var n=function(t){t=e(t),this.toNumber=function(){return t}};return n.prototype={isAGNumber:!0,isZero:function(e){return e||(e=1e-6),this.abs().toNumber()<e},equals:function(t,n){return t=e(t),n||(n=1e-6),this.subtract(t).abs().toNumber()<n},negative:function(){return new n(-this.toNumber())},abs:function(){var e=this.toNumber();return new n(e<0?-e:e)},inverse:function(){return new n(1/this.toNumber())},add:function(r){var i;if(r.isAGNumber){if(!t(r))return r.add(this);i=r.toNumber()}else i=e(r);return new n(this.toNumber()+i)},subtract:function(r){var i;if(r.isAGNumber){if(!t(r))return r.subtract(this).negative();i=r.toNumber()}else i=e(r);return new n(this.toNumber()-i)},multiply:function(r){var i;if(r.isAGNumber){if(!t(r))return r.multiply(this);i=r.toNumber()}else i=e(r);return new n(this.toNumber()*i)},divide:function(r){var i;if(r.isZero())return n.Zero;if(r.isAGNumber){if(!t(r))return r.divide(this).inverse();i=r.toNumber()}else i=e(r);return new n(this.toNumber()/i)},toString:function(){return this.toNumber().toString()}},n}();n.Zero={isAGNumber:!0,toNumber:function(){return 0},isZero:function(){return!0},equals:function(t,r){return t=e(t),t.equals(n.Zero)},negative:function(){return n.Zero},abs:function(){return 0},inverse:function(){return new n(1/0)},add:function(e){return e.toNumber?e:new n(e)},subtract:function(e){return e.toNumber?e.negative():new n(e)},multiply:function(){return n.Zero},divide:function(){return n.Zero},toString:function(){return 0..toString()}};var r=["isZero","equals","negative","abs","inverse","add","subtract","multiply","divide"];for(var i in r)Number.prototype[r[i]]=function(e){return function(){return n.prototype[e].apply(new n(this.valueOf()),arguments)}}(r[i]);return n}),define("Numbers/FractionalNumber",["Numbers/JSNumber"],function(e){function t(e){if(e.toNumber)return e.toNumber();if(typeof e=="number")return e;throw"NaN"}function n(t){return t instanceof e||typeof t=="number"||t===e.Zero}function r(e){return e%1===0}function i(e,t){return t===0?e:i(t,e%t)}function o(e){return Math.abs(e)>s}var s=Math.pow(2,53),u=function(){function s(e,t){var n,r,s;if(arguments.length>=1){n=Number(arguments[0]);if(arguments.length>=2){if(arguments[0].isAGNumber||arguments[1].isAGNumber)return arguments[0].divide(arguments[1]);r=Number(arguments[1])}else{if(arguments[0].isAGNumber)return arguments[0];r=1}}else n=1,r=1;s=!!(n<0^r<0),n=Math.abs(n%1===0?n:Math.round(n)),r=Math.abs(r%1===0?r:Math.round(r));var o=!1;this.reduce=function(){var e;if(!o){while((e=i(n,r))!==1)n/=e,r/=e;o=!0}return this},this.isNegative=function(){return s},this.negativeFactor=function(){return s?-1:1},this.getNumerator=function(){return n},this.getDenominator=function(){return r},this.toNumber=function(){return n/r*(s?-1:1)}}return s.prototype={isAGNumber:!0,isZero:function(e){return e||(e=1e-6),this.abs().toNumber()<e},equals:function(e,n){return e=t(e),n||(n=1e-6),this.subtract(e).abs().toNumber()<n},negative:function(){return new s(-this.negativeFactor()*this.getNumerator(),this.getDenominator())},abs:function(){var e=this.toNumber();return new s(this.getNumerator(),this.getDenominator())},inverse:function(){return this.isNegative()?new s(-this.getDenominator(),this.getNumerator()):new s(this.getDenominator(),this.getNumerator())},add:function(i){var u;if(i instanceof s){var a,f;a=this.negativeFactor()*this.getNumerator()*i.getDenominator()+i.negativeFactor()*i.getNumerator()*this.getDenominator(),f=this.getDenominator()*i.getDenominator();if(o(a)||o(f))this.reduce(),i.reduce(),a=this.negativeFactor()*this.getNumerator()*i.getDenominator()+i.negativeFactor()*i.getNumerator()*this.getDenominator(),f=this.getDenominator()*i.getDenominator();return new s(a,f)}if(i.isAGNumber){if(!n(i))return i.add(this);u=i.toNumber()}else u=t(i);if(r(u)){var a=this.negativeFactor()*this.getNumerator()+u*this.getDenominator();return o(a)&&(this.reduce(),a=this.negativeFactor()*this.getNumerator()+u*this.getDenominator()),new s(a,this.getDenominator())}return new e(this.toNumber()+u)},subtract:function(i){var u;if(i instanceof s){var a,f;a=this.negativeFactor()*this.getNumerator()*i.getDenominator()-i.negativeFactor()*i.getNumerator()*this.getDenominator(),f=this.getDenominator()*i.getDenominator();if(o(a)||o(f))this.reduce(),i.reduce(),a=this.negativeFactor()*this.getNumerator()*i.getDenominator()-i.negativeFactor()*i.getNumerator()*this.getDenominator(),f=this.getDenominator()*i.getDenominator();return new s(a,f)}if(i.isAGNumber){if(!n(i))return i.subtract(this).negative();u=i.toNumber()}else u=t(i);if(r(u)){var a=this.negativeFactor()*this.getNumerator()-u*this.getDenominator();return o(a)&&(this.reduce(),a=this.negativeFactor()*this.getNumerator()-u*this.getDenominator()),new s(a,this.getDenominator())}return new e(this.toNumber()-u)},multiply:function(i){var u;if(i instanceof s){var a,f;a=this.negativeFactor()*this.getNumerator()*i.negativeFactor()*i.getNumerator(),f=this.getDenominator()*i.getDenominator();if(o(a)||o(f))this.reduce(),i.reduce(),a=this.negativeFactor()*this.getNumerator()*i.negativeFactor()*i.getNumerator(),f=this.getDenominator()*i.getDenominator();return new s(a,f)}if(i.isAGNumber){if(!n(i))return i.multiply(this);u=i.toNumber()}else u=t(i);if(r(u)){var a=this.negativeFactor()*this.getNumerator()*u;return o(a)&&(this.reduce(),a=this.negativeFactor()*this.getNumerator()*u),new s(a,this.getDenominator())}return new e(this.toNumber()*u)},divide:function(i){var u;if(i instanceof s){var a,f;a=this.negativeFactor()*this.getNumerator()*i.negativeFactor()*i.getDenominator(),f=this.getDenominator()*i.getNumerator();if(o(a)||o(f))this.reduce(),i.reduce(),a=this.negativeFactor()*this.getNumerator()*i.negativeFactor()*i.getDenominator(),f=this.getDenominator()*i.getNumerator();return new s(a,f)}if(i.isAGNumber){if(!n(i))return i.divide(this).inverse();u=i.toNumber()}else u=t(i);if(r(u)){var f=this.getDenominator()*u;return o(f)&&(this.reduce(),f=this.getDenominator()*u),new s(this.negativeFactor()*this.getNumerator(),f)}return new e(this.toNumber()/u)},toString:function(){return this.reduce(),(this.negativeFactor()*this.getNumerator()).toString()+(this.getDenominator()===1?"":"/"+this.getDenominator())}},s}();return u}),define("Matrix/Vector",["Numbers/JSNumber"],function(e){var t=function(){var t=function(){var t,n;if(arguments[0]instanceof Array){t=arguments[0].length,n=new Array(t);for(var r=0;r<t;r++)n[r]=arguments[0][r].toNumber?arguments[0][r]:new e(arguments[0][r])}else typeof arguments[0]=="number"&&(t=arguments[0],n=new Array(t));this.getLength=function(){return t},this.getValue=function(e){return n[e]},this.setValue=function(t,r){if(!r.toNumber){if(typeof r!="number")throw"not a number type!";r=new e(r)}n[t]=r},this.toArray=function(){var e=new Array(this.getLength());for(var t=0;t<e.length;t++)e[t]=this.getValue(t);return e}};return t.prototype={negative:function(){var e=new t(this.getLength());for(var n=0;n<e.getLength();n++)e.setValue(n,this.getValue(n).negative());return e},add:function(e){if(this.getLength()!==e.getLength())throw"The vectors must have the same length!";var n=new t(this.getLength());for(var r=0;r<n.getLength();r++)n.setValue(r,this.getValue(r).add(e.getValue(r)));return n},subtract:function(e){if(this.getLength()!==e.getLength())throw"The vectors must have the same length!";var n=new t(this.getLength());for(var r=0;r<n.getLength();r++)n.setValue(r,this.getValue(r).subtract(e.getValue(r)));return n},multiply:function(n){if(!n.toNumber){if(typeof n!="number")throw"value must be number!";n=new e(n)}var r=new t(this.getLength());for(var i=0;i<r.getLength();i++)r.setValue(i,this.getValue(i).multiply(n));return r},divide:function(e){if(!e.toNumber&&typeof e!="number")throw"value must be number!";var n=new t(this.getLength());for(var r=0;r<n.getLength();r++)n.setValue(r,this.getValue(r).divide(e));return n},dot:function(e){if(this.getLength()!==e.getLength())throw"The vectors must have the same length!";var t=null;for(var n=0;n<this.getLength();n++){var r=this.getValue(n).multiply(e.getValue(n));t=t?t.add(r):r}return t},equals:function(e,t){if(this.getLength()!==e.getLength())return!1;for(var n=0;n<this.getLength();n++){var r=t instanceof Array?t[n]:t;if(!this.getValue(n).equals(e.getValue(n),r))return!1}return!0},toString:function(){var e="[";for(var t=0;t<this.getLength();t++)e+=this.getValue(t),t!=this.getLength()-1&&(e+=",");return e+="]",e}},t}();return t}),define("Matrix/Matrix",["Numbers/JSNumber","Numbers/FractionalNumber","Matrix/Vector"],function(e,t,n){var r=function(){var r=function(n,r,i){var s=this,o=new Array(n*r);i&&(this.useFractions=!!i.useFractions),this.getNumRows=function(){return n},this.getNumColumns=function(){return r},this.getValue=function(e,t){return o[r*e+t]},this.setValue=function(n,i,u){if(!u.toNumber){if(typeof u!="number")throw"not a number type!";u=s.useFractions?new t(u,1):new e(u)}o[r*n+i]=u};for(var u=0;u<n;u++)for(var a=0;a<r;a++)this.setValue(u,a,e.Zero)};return r.prototype={setRow:function(e,t){if(!(t instanceof Array)){if(!(t instanceof n))throw"value must be an Array or Vector";t=t.toArray()}var r=Math.min(t.length,this.getNumColumns());for(var i=0;i<r;i++)this.setValue(e,i,t[i])},setColumn:function(e,t){if(!(t instanceof Array)){if(!(t instanceof n))throw"value must be an Array or Vector";t=t.toArray()}var r=Math.min(t.length,this.getNumRows());for(var i=0;i<r;i++)this.setValue(i,e,t[i])},setMatrix:function(e){if(!(e instanceof Array))throw"value must be an array!";var t=Math.min(e.length,this.getNumRows());for(var n=0;n<t;n++)this.setRow(n,e[n])},getRow:function(e){var t=new Array(this.getNumColumns());for(var r=0;r<t.length;r++)t[r]=this.getValue(e,r);return new n(t)},getColumn:function(e){var t=new Array(this.getNumRows());for(var r=0;r<t.length;r++)t[r]=this.getValue(r,e);return new n(t)},copy:function(){var e=new r(this.getNumRows(),this.getNumColumns());for(var t=0;t<e.getNumRows();t++)for(var n=0;n<e.getNumColumns();n++)e.setValue(t,n,this.getValue(t,n));return e},swapRows:function(e,t){if(e!==t){var n=this.getRow(e);this.setRow(e,this.getRow(t)),this.setRow(t,n)}},equals:function(e){if(e instanceof r){if(e.getNumRows()!==this.getNumRows()&&e.getNumColumns()!==this.getNumColumns())throw"Matrices must be same size.";for(var t=0;t<this.getNumRows();t++)for(var n=0;n<this.getNumColumns();n++)if(!this.getValue(t,n).equals(e.getValue(t,n)))return!1;return!0}throw"Must be of type Matrix."},determinant:function(){if(this.getNumRows()!==this.getNumColumns())throw"n x n Matrix required to determine determinant.";var e=this.getNumColumns();if(e===2){var t=this.getValue(0,0).multiply(this.getValue(1,1)),n=this.getValue(0,1).multiply(this.getValue(1,0));return t.subtract(n)}var i=null;for(var s=0;s<e;s++){var o=new r(e-1,e-1),u=0;for(var a=0;a<e;a++)if(a!=s){var f=this.getColumn(a).toArray().slice(1,e);o.setColumn(u++,f)}var l=this.getValue(0,s).multiply(o.determinant());i=i?s%2?i.subtract(l):i.add(l):l}return i},transpose:function(){var e=this,t=new r(e.getNumColumns(),e.getNumRows());for(var n=0;n<e.getNumRows();n++)for(var i=0;i<e.getNumColumns();i++)t.setValue(i,n,e.getValue(n,i));return t},add:function(e){if(!(e instanceof r))throw"input must be Matrix";if(this.getNumColumns()!=e.getNumColumns()&&this.getNumRows()!=e.getNumRows())throw"Both matrices must be m x n.";var t=new r(this.getNumRows(),this.getNumColumns());for(var n=0;n<t.getNumRows();n++)for(var i=0;i<t.getNumColumns();i++)t.setValue(n,i,this.getValue(n,i).add(e.getValue(n,i)))},subtract:function(e){if(!(e instanceof r))throw"input must be Matrix";if(this.getNumColumns()!=e.getNumColumns()&&this.getNumRows()!=e.getNumRows())throw"Both matrices must be m x n.";var t=new r(this.getNumRows(),this.getNumColumns());for(var n=0;n<t.getNumRows();n++)for(var i=0;i<t.getNumColumns();i++)t.setValue(n,i,this.getValue(n,i).subtract(e.getValue(n,i)))},multiply:function(){if(arguments[0]instanceof r){var e=arguments[0];if(this.getNumColumns()!=e.getNumRows())throw"This matrices number of columns must equal input's number of rows.";var t=new r(this.getNumRows(),e.getNumColumns());for(var i=0;i<t.getNumColumns();i++)for(var s=0;s<t.getNumRows();s++){var o=this.getRow(s),u=e.getColumn(i),a=o.dot(u);t.setValue(s,i,a)}return t}if(arguments[0]instanceof n){var f=arguments[0];if(this.getNumColumns()!=f.getLength())throw"The vector must be in R^n";var t=new n(f.getLength());for(var s=0;s<t.getNumRows();s++){var o=this.getRow(s),a=o.dot(f);t.setValue(s,a)}return t}var l=arguments[0];if(!l.toNumber&&typeof l!="number")throw"input must be Matrix, Vector, or Number";var t=new r(this.getNumRows(),this.getNumColumns());for(var s=0;s<t.getNumRows();s++)for(var i=0;i<t.getNumColumns();i++)t.setValue(s,i,this.getValue(s,i).multiply(l));return t},rowReduce:function(){var e=this;if(this.getNumRows()>this.getNumColumns())throw"m must be <= n";var t=0,n=0,r=this.copy();for(var i=0;i<r.getNumRows();i++){var s=function(){while(t<r.getNumColumns()){for(var e=n;e<r.getNumRows();e++)if(!r.getValue(e,t).isZero())return e;t++}throw"Not reducible."}();r.swapRows(s,n);var o=r.getValue(n,t),u=r.getRow(n).divide(o);r.setRow(n,u);for(var a=0;a<r.getNumRows();a++)if(a!==i){var f=r.getValue(a,t).negative(),l=r.getRow(a).add(u.multiply(f));r.setRow(a,l)}n++,t++}return r},inverse:function(){if(this.getNumRows()!==this.getNumColumns())throw"n x n Matrix required to determine inverse.";var e=r.Identity(this.getNumRows()),t=new r(this.getNumRows(),this.getNumColumns()*2);for(var n=0;n<this.getNumColumns();n++)t.setColumn(n,this.getColumn(n));for(var n=this.getNumColumns();n<this.getNumColumns()*2;n++)t.setColumn(n,e.getColumn(n-this.getNumColumns()));var i=t.rowReduce();for(var n=0;n<this.getNumColumns();n++)for(var s=0;s<this.getNumRows();s++){var o;n===s?o=i.getValue(s,n).equals(1):o=i.getValue(s,n).isZero();if(!o)throw"could not be inverted!"}var e=new r(this.getNumRows(),this.getNumColumns());for(var n=0;n<this.getNumColumns();n++)e.setColumn(n,i.getColumn(n+this.getNumColumns()));return e},toString:function(){var e="[";for(var t=0;t<this.getNumRows();t++)e+=this.getRow(t).toString(),t!=this.getNumRows()-1&&(e+=",");return e+="]",e}},r.Identity=function(e){var t=new r(e,e);for(var n=0;n<e;n++)t.setValue(n,n,1);return t},r}();return r}),define("Numbers/ComplexNumber",["Numbers/JSNumber"],function(e){var t=function(){var t=function(t,n){var r=t.isAGNumber?t:new e(t),i=n.isAGNumber?n:new e(n);if(isNaN(r.toNumber())||isNaN(i.toNumber()))throw"DEBUG";this.getReal=function(){return r},this.getImaginary=function(){return i},this.toNumber=function(){var e=this.getReal().multiply(this.getReal()).add(this.getImaginary().multiply(this.getImaginary())).toNumber();return Math.sqrt(e)}};return t.prototype={isAGNumber:!0,isZero:function(e){return e||(e=1e-6),this.getReal().isZero()&&this.getImaginary().isZero()},equals:function(e,n){return n||(n=1e-6),e instanceof t?this.subtract(e).isZero():this.getImaginary().isZero()?this.getReal().subtract(e).abs().toNumber()<n:!1},negative:function(){return new t(this.getReal().negative(),this.getImaginary().negative())},abs:function(){var t=this.getReal().multiply(this.getReal()).add(this.getImaginary().multiply(this.getImaginary())).toNumber();return new e(Math.sqrt(t))},inverse:function(){return(new t(1,0)).divide(this)},add:function(e){return e instanceof t?new t(this.getReal().add(e.getReal()),this.getImaginary().add(e.getImaginary())):new t(this.getReal().add(e),this.getImaginary())},subtract:function(e){return e instanceof t?new t(this.getReal().subtract(e.getReal()),this.getImaginary().subtract(e.getImaginary())):new t(this.getReal().subtract(e),this.getImaginary())},multiply:function(e){if(e instanceof t){var n=this.getReal().multiply(e.getReal()).subtract(this.getImaginary().multiply(e.getImaginary())),r=this.getReal().multiply(e.getImaginary()).add(this.getImaginary().multiply(e.getReal()));return new t(n,r)}return new t(this.getReal().multiply(e),this.getImaginary().multiply(e))},divide:function(n){if(this.isZero())return e.Zero;if(n instanceof t){var r=n.getReal().multiply(n.getReal()).add(n.getImaginary().multiply(n.getImaginary())),i=this.getReal().multiply(n.getReal()).add(this.getImaginary().multiply(n.getImaginary())),s=this.getImaginary().multiply(n.getReal()).subtract(this.getReal().multiply(n.getImaginary()));return i=i.divide(r),s=s.divide(r),new t(i,s)}return new t(this.getReal().divide(n),this.getImaginary().divide(n))},angle:function(t){var n=this,r=new e(Math.atan(n.getImaginary().divide(n.getReal()).toNumber()));return n.getReal().toNumber()<0?n.getImaginary().toNumber()<0?(new e(Math.PI)).subtract(r):(new e(Math.PI)).add(r):r},complexConjugate:function(){return new t(this.getReal(),this.getImaginary().negative())},toString:function(){var e="";return this.isZero()?"0":(this.getReal().isZero()||(e+=this.getReal().toString()),this.getImaginary().isZero()||(this.getReal().isZero()?e+=this.getImaginary().toNumber()<0?"-":"":e+=this.getImaginary().toNumber()<0?"-":"+",e+="i",this.getImaginary().abs().equals(1)||(e+=this.getImaginary().abs().toNumber().toString())),e)}},t}();return t}),define("AGMath",["Matrix/Matrix","Matrix/Vector","Numbers/JSNumber","Numbers/ComplexNumber","Numbers/FractionalNumber"],function(e,t,n,r,i){return{Matrix:{Matrix:e,Vector:t},Numbers:{JSNumber:n,ComplexNumber:r,FractionalNumber:i}}});